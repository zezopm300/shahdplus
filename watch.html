<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title id="page-title">شاهد بلس - مشاهدة فيلم</title>
  <meta name="description" content="شاهد الفيلم بجودة عالية على شاهد بلس.">
  <meta name="robots" content="index, follow">

  <link rel="stylesheet" href="style.css">
  <link rel="icon" href="/favicon.ico" type="image/x-icon">
</head>
<body>
  <div class="container">
    <h1 id="movie-title">تحميل...</h1>
    <video id="movie-video" controls width="100%" poster="">
      <source id="video-source" src="" type="video/mp4">
      متصفحك لا يدعم تشغيل الفيديو.
    </video>

    <div class="movie-info">
      <img id="movie-poster" src="" alt="ملصق الفيلم" width="250" style="margin-top: 20px;">
      <p><strong>الوصف:</strong> <span id="movie-description"></span></p>
      <p><strong>تاريخ الإصدار:</strong> <span id="movie-release"></span></p>
      <p><strong>النوع:</strong> <span id="movie-genre"></span></p>
      <p><strong>المخرج:</strong> <span id="movie-director"></span></p>
      <p><strong>الممثلون:</strong> <span id="movie-cast"></span></p>
      <p><strong>المدة:</strong> <span id="movie-duration"></span></p>
      <p><strong>التقييم:</strong> <span id="movie-rating"></span></p>
    </div>
  </div>

  <!-- ✅ سكربت جلب البيانات + توليد Structured Data -->
  <script>
    const urlParams = new URLSearchParams(window.location.search);
    const movieId = urlParams.get("id");

    fetch('movies.json')
      .then(res => res.json())
      .then(movies => {
        const movie = movies.find(m => m.id === movieId);
        if (!movie) {
          document.body.innerHTML = "<h2>الفيلم غير موجود</h2>";
          return;
        }

        document.getElementById("page-title").textContent = `شاهد بلس - ${movie.title}`;
        document.getElementById("movie-title").textContent = movie.title;
        document.getElementById("video-source").src = movie.video_url;
        document.getElementById("movie-video").poster = movie.poster;
        document.getElementById("movie-video").load();

        document.getElementById("movie-description").textContent = movie.description;
        document.getElementById("movie-release").textContent = movie.release_date;
        document.getElementById("movie-genre").textContent = movie.genre;
        document.getElementById("movie-director").textContent = movie.director;
        document.getElementById("movie-cast").textContent = movie.cast;
        document.getElementById("movie-duration").textContent = movie.duration;
        document.getElementById("movie-rating").textContent = movie.rating;
        document.getElementById("movie-poster").src = movie.poster;

        // ✅ إنشاء Structured Data VideoObject تلقائياً
        const videoData = {
          "@context": "https://schema.org",
          "@type": "VideoObject",
          "name": movie.title,
          "description": movie.description,
          "thumbnailUrl": movie.poster,
          "uploadDate": movie.release_date + "T12:00:00+03:00",
          "contentUrl": movie.video_url,
          "embedUrl": window.location.href,
          "publisher": {
            "@type": "Organization",
            "name": "شاهد بلس",
            "logo": {
              "@type": "ImageObject",
              "url": "https://shahidplus.online/images/logo.png"
            }
          }
        };

        const scriptTag = document.createElement('script');
        scriptTag.type = 'application/ld+json';
        scriptTag.textContent = JSON.stringify(videoData);
        document.head.appendChild(scriptTag);
      });
  </script>
</body>
</html>
