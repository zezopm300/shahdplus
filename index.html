<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="UTF-8">
  <title>مشاهدة الفيلم</title>
  <link rel="stylesheet" href="/assets/css/style.css">
  <link href="https://vjs.zencdn.net/8.9.0/video-js.css" rel="stylesheet" />
</head>
<body>
  <div class="container">
    <h1 id="movie-title"></h1>
    <p id="movie-description"></p>
    <video id="video-player" class="video-js vjs-default-skin" controls preload="auto" width="640" height="360"></video>
  </div>

  <script src="https://vjs.zencdn.net/8.9.0/video.min.js"></script>
  <script>
    const params = new URLSearchParams(window.location.search);
    const movieId = params.get("id");

    fetch("moviesjson.json")
      .then((res) => res.json())
      .then((movies) => {
        const movie = movies.find((m) => m.id == movieId);
        if (!movie) return document.body.innerHTML = "فيلم غير موجود.";

        document.getElementById("movie-title").textContent = movie.title;
        document.getElementById("movie-description").textContent = movie.description;

        const player = videojs("video-player");
        player.src({ src: movie.video_url, type: "video/mp4" });
      });
  </script>
</body>
</html>
